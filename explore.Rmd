---
jupyter:
  jupytext:
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.2'
      jupytext_version: 1.8.0
  kernelspec:
    display_name: Python 3
    language: python
    name: python3
---

```{python}
import pandas as pd
import matplotlib
import matplotlib.pyplot as plt
import matplotlib.image as image
import os
import shutil
import random
import re
```

```{python}
basedir = '..'
```

```{python}
os.path.join(*['..', 'll'])
```

```{python}
df = pd.read_csv(os.path.join(basedir, 'train.csv'))
```

```{python}
# 11
```

```{python}
max(df["class"])
```

```{python}
plt.imshow(image.imread(os.path.join(basedir, 'train', '15300.jpg')))
```

```{python}
# range scarpe: [15309, 28206] class [1849, 2834]
```

```{python}
df[df["class"] == 1849].iloc[0]
```

```{python}
df.iloc[28206]
```

```{python}
#for current_class in range(0, max(df["class"]), 50):
for current_class in range(1847, 1900, 1):
    res = df[df["class"] == current_class]["name"].iloc[0]
    print(current_class)
    plt.imshow(image.imread(os.path.join(basedir, 'train', res)))
    plt.show()
    
```

```{python}
df.iloc[image]["name"]
```

```{python}
for f in range(15309, 28206):
    print(df.iloc[f]["name"])
    plt.imshow(image.imread(os.path.join(basedir, 'train', df.iloc[f]["name"])))
    plt.show()
```

```{python}
[15313, 15319, 15330, 15312, 15317, 15353, 15360, 15370, 15372, 15381, 15396, 15404, 15406, 15407, 15414, 15421, 15429, ]
```

```{python}
sampled = random.sample(range(15309, 28206), 1000)
```

```{python}
sample_dir = os.path.join(basedir, 'sample_train')
if not os.path.isdir(sample_dir):
    os.mkdir(sample_dir)
for i in sampled:
    iname = f'{i}.jpg'
    shutil.copyfile(os.path.join(basedir, 'train', iname),
                   os.path.join(sample_dir, iname))
```

```{python}
filter_list = os.listdir(sample_dir)
```

```{python}
filter_list.sort()
```

```{python}
x = 0
dir150=os.path.join(basedir, 'dir150')
df150 = pd.DataFrame(index=range(200), columns=["fname"])
if not os.path.isdir(dir150):
    os.mkdir(dir150)
for i in filter_list:
    
    num = int(re.search('([0-9]+)\.jpg', i).group(1))
    if num > 17700:
        break
    #shutil.copyfile(os.path.join(sample_dir, i), os.path.join(dir150, i))
    df150.iloc[x] = i
    x+=1
    
print(x)
```

```{python}
df150 = df150[df150["fname"].notna()]
```

```{python}
df150.to_csv(os.path.join(basedir, 'scarpe_filtered.csv'))
```

```{python}
os.listdir(basedir)
```
